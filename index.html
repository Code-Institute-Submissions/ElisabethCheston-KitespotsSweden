<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

     <!-- Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet@2.5.0/dist/esri-leaflet.js" integrity="sha512-ucw7Grpc+iEQZa711gcjgMBnmd9qju1CICsRaryvX7HJklK0pGl/prxKvtHwpgm5ZHdvAil7YPxI1oWPOWK3UQ==" crossorigin=""></script>

    <!-- Load Leaflet MarkerCluster and Esri Leaflet Cluster from CDN -->
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" integrity="sha512-BBToHPBStgMiw0lD4AtkRIZmdndhB6aQbXpX7omcrXeG2PauGBl2lzq2xUZTxaLxYz5IDHlmneCZ1IJ+P3kYtQ==" crossorigin="">
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" integrity="sha512-RLEjtaFGdC4iQMJDbMzim/dOvAu+8Qp9sw7QE4wIMYcg2goVoivzwgSZq9CsIxp4xKAZPKh5J2f2lOko2Ze6FQ==" crossorigin="">
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js" integrity="sha512-MQlyPV+ol2lp4KodaU/Xmrn+txc1TP15pOBF/2Sfre7MRsA/pB4Vy58bEqe9u7a7DczMLtU5wT8n7OblJepKbg==" crossorigin=""></script>
    <script src="https://unpkg.com/esri-leaflet-cluster@2.1.0/dist/esri-leaflet-cluster.js" integrity="sha512-fEdNFHisleVtEYdLhW4Z2RsR7TN6hLutE/+O4D+skfTNY2rlHm8HOZARPWkdrFFy/+i2KjFxcZAKTUWaVfbV0g==" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.markercluster.layersupport@2.0.1/dist/leaflet.markercluster.layersupport.js"></script>
    
    <title>KitespotsSweden</title>
    <style>
        html, body, #map {
            height: 100%;
            padding: 0px;
            margin: 0px;
        }
    </style>
</head>
<body>
    <div id="map"></div>

        <!--GeoJson data-->
    <script src="/js/kitespots.js"></script>
    <script src="/js/cities.js"></script>
    <script src="/json/kitespots.json"></script>
    <script src="/json/cities.json"></script>



    <script>
        
        // - Base maps variables - //
        var hybrid = L.esri.basemapLayer('ImageryClarity');
        var topographic = L.esri.basemapLayer('Topographic');
        var streets = L.esri.basemapLayer('Streets');


        // - Create an on load ESRI basemap - //
        var map = L.map('map', {
            center: [62.45,17.45],
            zoom: 5
        }),
        baseImagery = L.layerGroup();
        L.esri.basemapLayer('ImageryClarity').addTo(map);


        // - Clustering markers reference: https://github.com/Leaflet/Leaflet.markercluster - //
        // - Leaflet reference; https://leafletjs.com/reference-1.7.1.html#geojson - //
        var clusterGroup = new L.markerClusterGroup();
        var kiteSpots = L.geoJson(kitespots, {
            pointToLayer: function (feature, latlng) {
            return L.marker(latlng)
            .bindPopup("<p><b> "+feature.properties.name + "</b><br/>" + "Wind Direction: " + feature.properties.windDirection + "</p>");
            }
        });
        clusterGroup.addLayer(kiteSpots);
        map.addLayer(clusterGroup);


        // - Control layers, reference; https://esri.github.io/esri-leaflet/examples/layers-control.html - //
        var baseLayers = {
            "Hybrid": hybrid,
            "Topographic": topographic,
            "Streets": streets
        };

        var overLays = {
            'Kitespots': kiteSpots
        };

        L.control.layers(baseLayers, overLays).addTo(map);


/*
        // - Kitespots from geojson made in GeoJson.io - //
        var allKitespotsGeoJson = kitespots

        var allKitespots = L.geoJSON(allKitespotsGeoJson, {
            style: function (feature) {
                return {color: feature.properties.color};
            }
        }).bindPopup(function (layer) {
            return layer.feature.properties.name;
        }).addTo(map);
*/

    </script>
</body>
</html>